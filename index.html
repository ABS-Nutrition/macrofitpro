<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MacroFit Pro ‚Äî Avec Di√®te</title>

<style>
:root{
  --bg1:#0F1C3A;
  --bg2:#1F4B9C;
  --panel:#F4F6FA;
  --card:#FFFFFF;
  --border:#E1E6EE;
  --gold:#C9A227;
  --text:#0B132B;
  --muted:#5F6F8A;
}

/* GLOBAL */
*{box-sizing:border-box;}
body{
  margin:0;
  padding:0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  background:linear-gradient(180deg, var(--bg1), var(--bg2));
  color:var(--text);
  min-height:100vh;
}

/* APP CONTAINER */
.app{
  max-width: 900px;
  margin:30px auto;
  background:var(--panel);
  padding:26px;
  border-radius:22px;
  box-shadow:0 0 30px rgba(0,0,0,.15);
}

/* SECTIONS */
.section{
  margin-top:22px;
  padding-top:18px;
  border-top:1px solid var(--border);
}
.section h2{
  color:var(--bg2);
}

/* TABLES */
.table-box{
  margin-top:18px;
  background:var(--card);
  padding:14px;
  border-radius:16px;
  border-left:5px solid var(--gold);
}
table{
  width:100%;
  border-collapse:collapse;
}
th, td{
  border:1px solid var(--border);
  padding:8px;
  text-align:center;
  font-size:13px;
}

/* BUTTONS */
button{
  width:100%;
  margin-top:18px;
  padding:14px;
  border-radius:16px;
  border:none;
  background:linear-gradient(90deg, var(--bg2), var(--gold));
  color:white;
  font-weight:900;
}

/* DIET PAGE */
#dietPage{
  display:none;
  padding:20px;
  background:white;
  border-radius:16px;
}
</style>
</head>

<body>

<div class="app">

<!-- ================= FORMULAIRE ================= -->
<div id="formPage">
<h1>MacroFit Pro</h1>

<div class="section">
<h2>Donn√©es</h2>
<input id="age" type="number" placeholder="√Çge">
<input id="taille" type="number" placeholder="Taille (cm)">
<input id="poids" type="number" placeholder="Poids (kg)">

<select id="sexe">
  <option value="M">Homme</option>
  <option value="F">Femme</option>
</select>

<select id="activite">
  <option value="1.2">S√©dentaire</option>
  <option value="1.375">L√©ger</option>
  <option value="1.55">Mod√©r√©</option>
  <option value="1.725">Tr√®s actif</option>
  <option value="1.9">Extr√™me</option>
</select>

<select id="morpho">
  <option value="auto">Auto</option>
  <option value="ecto">Ectomorphe</option>
  <option value="meso">M√©somorphe</option>
  <option value="endo">Endomorphe</option>
</select>
</div>

<button onclick="calculate()">CALCULER</button>
</div>

<!-- ================= PAGE R√âSULTATS ================= -->
<div id="resultsPage" style="display:none;">

<div class="section">
<h2>M√©tabolisme</h2>
<div class="table-box">
<table>
<tr><th>BMR (kcal/j)</th><th>TDEE (kcal/j)</th></tr>
<tr><td id="bmr"></td><td id="tdee"></td></tr>
</table>
</div>
</div>

<div class="section">
<h2>IMC & Seuils</h2>
<div class="table-box" id="morphoBox"></div>
</div>

<div class="section">
<h2>Prot√©ines (kcal ‚Üí g/j)</h2>
<div class="table-box">
<table>
<tr><th>Objectif</th><th>kcal</th><th>g/j</th></tr>
<tr><td>Maintien</td><td id="pcal_maint"></td><td id="p_maint"></td></tr>
<tr><td>S√®che</td><td id="pcal_cut"></td><td id="p_cut"></td></tr>
<tr><td>Prise</td><td id="pcal_bulk"></td><td id="p_bulk"></td></tr>
</table>
</div>
</div>

<div class="section">
<h2>Lipides (kcal ‚Üí g/j)</h2>
<div class="table-box">
<table>
<tr><th>Objectif</th><th>kcal</th><th>g/j</th></tr>
<tr><td>Maintien</td><td id="lcal_maint"></td><td id="l_maint"></td></tr>
<tr><td>S√®che</td><td id="lcal_cut"></td><td id="l_cut"></td></tr>
<tr><td>Prise</td><td id="lcal_bulk"></td><td id="l_bulk"></td></tr>
</table>
</div>
</div>

<div class="section">
<h2>Glucides (kcal ‚Üí g/j)</h2>
<div class="table-box">
<table>
<tr><th>Objectif</th><th>kcal</th><th>g/j</th></tr>
<tr><td>Maintien</td><td id="gcal_maint"></td><td id="g_maint"></td></tr>
<tr><td>S√®che</td><td id="gcal_cut"></td><td id="g_cut"></td></tr>
<tr><td>Prise</td><td id="gcal_bulk"></td><td id="g_bulk"></td></tr>
</table>
</div>
</div>

<!-- üî• BOUTON DI√àTE AJOUT√â ICI -->
<button onclick="generateDiet()">üçΩÔ∏è CR√âER MA DI√àTE PERSONNALIS√âE</button>

<button onclick="window.print()">T√âL√âCHARGER PDF</button>
</div>

<!-- ================= NOUVELLE PAGE DI√àTE ================= -->
<div id="dietPage">
  <h2>üçΩÔ∏è Ta Di√®te Personnalis√©e</h2>

  <p><b>Objectif :</b> <span id="dietObjective"></span></p>
  <p><b>Calories cible :</b> <span id="dietCalories"></span> kcal</p>
  <p><b>Macros :</b> P: <span id="dietP"></span>g | L: <span id="dietL"></span>g | G: <span id="dietG"></span>g</p>

  <div id="dietContent"></div>

  <button onclick="backToResults()">Retour aux r√©sultats</button>
</div>

<script>
// VARIABLES GLOBALES (IMPORTANT POUR LA DI√àTE)
let bmr, tdee, imc, p_maint, l_maint, g_maint, p_cut, l_cut, g_cut, p_bulk, l_bulk, g_bulk;

function calculate(){

const age = +document.getElementById("age").value;
const taille = +document.getElementById("taille").value;
const poids = +document.getElementById("poids").value;
const sexe = document.getElementById("sexe").value;
const act = +document.getElementById("activite").value;
const morpho = document.getElementById("morpho").value;

// BMR (Mifflin)
bmr = (sexe==="M")
? (10*poids)+(6.25*taille)-(5*age)+5
: (10*poids)+(6.25*taille)-(5*age)-161;

// TDEE
tdee = bmr * act;
if(morpho==="ecto") tdee*=1.05;
if(morpho==="endo") tdee*=0.95;

// IMC
const h = taille/100;
imc = poids/(h*h);
let imc_cat = imc<18.5?"Maigreur":imc<25?"Normal":imc<30?"Surpoids":"Ob√©sit√©";
const ideal = (22.5*h*h).toFixed(1);
const overweight = (25*h*h).toFixed(1);
const underweight = (18.5*h*h).toFixed(1);

// MACROS
p_maint = poids*2.2;
p_cut = poids*2.6;
p_bulk = poids*2.0;

l_maint = poids*0.8;
l_cut = poids*0.7;
l_bulk = poids*0.9;

// GLUCIDES COH√âRENTS AVEC TDEE
g_maint = (tdee - (p_maint*4) - (l_maint*9))/4;
g_cut = (tdee - 350 - (p_cut*4) - (l_cut*9))/4;
g_bulk = (tdee + 350 - (p_bulk*4) - (l_bulk*9))/4;

// AFFICHAGE
document.getElementById("bmr").innerText = Math.round(bmr);
document.getElementById("tdee").innerText = Math.round(tdee);

document.getElementById("morphoBox").innerHTML = `
<table>
<tr><th>IMC</th><th>Cat√©gorie</th><th>Poids id√©al</th><th>Surpoids d√®s</th><th>Maigreur sous</th></tr>
<tr>
<td>${imc.toFixed(1)}</td>
<td>${imc_cat}</td>
<td>${ideal} kg</td>
<td>${overweight} kg</td>
<td>${underweight} kg</td>
</tr>
</table>
`;

// Calories macros
document.getElementById("pcal_maint").innerText = Math.round(p_maint*4)+" kcal";
document.getElementById("lcal_maint").innerText = Math.round(l_maint*9)+" kcal";
document.getElementById("gcal_maint").innerText = Math.round(g_maint*4)+" kcal";

document.getElementById("p_maint").innerText = Math.round(p_maint)+" g/j";
document.getElementById("l_maint").innerText = Math.round(l_maint)+" g/j";
document.getElementById("g_maint").innerText = Math.round(g_maint)+" g/j";

document.getElementById("formPage").style.display="none";
document.getElementById("resultsPage").style.display="block";
}

// ================= BASE DE DI√àTES =================
const dietDatabase = {
  "maintien": [
    {
      name: "Di√®te m√©diterran√©enne √©quilibr√©e",
      meals: [
        {
          title: "Petit-d√©jeuner",
          items: [
            "Flocons d‚Äôavoine 80g",
            "Yaourt grec 200g",
            "Miel 10g",
            "Amandes 20g",
            "Fruits rouges 150g"
          ],
          prep: "M√©lange les flocons, le yaourt et le miel, ajoute fruits et amandes."
        },
        {
          title: "D√©jeuner",
          items: [
            "Riz basmati cuit 200g",
            "Poulet grill√© 180g",
            "Huile d‚Äôolive 10g",
            "L√©gumes vari√©s 300g"
          ],
          prep: "Grille le poulet, assaisonne, sers avec riz et l√©gumes."
        }
      ]
    }
  ],

  "seche": [
    {
      name: "S√®che haute prot√©ine",
      meals: [
        {
          title: "Petit-d√©jeuner",
          items: [
            "Blancs d‚Äô≈ìufs 5",
            "Flocons d‚Äôavoine 60g",
            "Fruits rouges 150g"
          ],
          prep: "Cuire les blancs, m√©langer avec avoine et fruits."
        }
      ]
    }
  ],

  "prise": [
    {
      name: "Prise de masse propre",
      meals: [
        {
          title: "Petit-d√©jeuner",
          items: [
            "Flocons d‚Äôavoine 100g",
            "Whey 30g",
            "Beurre de cacahu√®te 20g",
            "Banane 1"
          ],
          prep: "Mixer le tout en shake."
        }
      ]
    }
  ],

  "prise_poids": [
    {
      name: "Prise de poids rapide",
      meals: [
        {
          title: "Petit-d√©jeuner",
          items: [
            "Avoine 120g",
            "Whey 40g",
            "Beurre de cacahu√®te 30g",
            "Banane 1"
          ],
          prep: "Mixer en shake √©pais."
        }
      ]
    }
  ]
};

// ================= G√âN√âRATION DI√àTE =================
function generateDiet(){

let objective;
if(imc < 18.5) objective = "prise_poids";
else if(imc < 25) objective = "maintien";
else objective = "seche";

document.getElementById("dietObjective").innerText = objective;
document.getElementById("dietCalories").innerText = Math.round(tdee);
document.getElementById("dietP").innerText = Math.round(p_maint);
document.getElementById("dietL").innerText = Math.round(l_maint);
document.getElementById("dietG").innerText = Math.round(g_maint);

const dietList = dietDatabase[objective];
const selectedDiet = dietList[Math.floor(Math.random()*dietList.length)];

let html = `<h3>${selectedDiet.name}</h3>`;

selectedDiet.meals.forEach(meal => {
  html += `<h4>${meal.title}</h4><ul>`;
  meal.items.forEach(item => html += `<li>${item}</li>`);
  html += `</ul><p><b>Pr√©paration :</b> ${meal.prep}</p>`;
});

document.getElementById("dietContent").innerHTML = html;

document.getElementById("resultsPage").style.display="none";
document.getElementById("dietPage").style.display="block";
}

function backToResults(){
document.getElementById("dietPage").style.display="none";
document.getElementById("resultsPage").style.display="block";
}
</script>

</body>
</html>
