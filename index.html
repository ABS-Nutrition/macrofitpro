<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MacroFit Pro ‚Äî Optimis√©</title>

<style>
:root{
  --bg1:#0F1C3A;
  --bg2:#1F4B9C;
  --panel:#F4F6FA;
  --card:#FFFFFF;
  --border:#E1E6EE;
  --gold:#C9A227;
  --text:#0B132B;
  --muted:#5F6F8A;
}

/* GLOBAL */
*{box-sizing:border-box;}
body{
  margin:0;
  padding:0;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  background:linear-gradient(180deg, var(--bg1), var(--bg2));
  color:var(--text);
  min-height:100vh;
}

/* APP CONTAINER */
.app{
  max-width: 900px;
  margin:30px auto;
  background:var(--panel);
  padding:26px;
  border-radius:22px;
  box-shadow:0 0 30px rgba(0,0,0,.15);
}

/* SECTIONS */
.section{
  margin-top:22px;
  padding-top:18px;
  border-top:1px solid var(--border);
}
.section h2{
  color:var(--bg2);
}

/* TABLES */
.table-box{
  margin-top:18px;
  background:var(--card);
  padding:14px;
  border-radius:16px;
  border-left:5px solid var(--gold);
}
table{
  width:100%;
  border-collapse:collapse;
}
th, td{
  border:1px solid var(--border);
  padding:8px;
  text-align:center;
  font-size:13px;
}

/* EXPLANATIONS */
.explain{
  background:#F1F3F7;
  padding:14px;
  border-radius:14px;
  margin-top:10px;
  font-size:13px;
}

/* INTERPRETATION */
.interpretation{
  background:#E6F4FF;
  padding:14px;
  border-radius:14px;
  border-left:5px solid var(--bg2);
  margin-top:16px;
}

/* BUTTONS */
button{
  width:100%;
  margin-top:18px;
  padding:14px;
  border-radius:16px;
  border:none;
  background:linear-gradient(90deg, var(--bg2), var(--gold));
  color:white;
  font-weight:900;
}

/* DIET PAGE */
#dietPage{
  display:none;
  background:white;
  padding:20px;
  border-radius:16px;
}
</style>
</head>

<body>

<div class="app">

<!-- ================= FORMULAIRE ================= -->
<div id="formPage">
<h1>MacroFit Pro</h1>

<div class="section">
<h2>Donn√©es</h2>
<input id="age" type="number" placeholder="√Çge">
<input id="taille" type="number" placeholder="Taille (cm)">
<input id="poids" type="number" placeholder="Poids (kg)">
<select id="sexe">
  <option value="M">Homme</option>
  <option value="F">Femme</option>
</select>
<select id="activite">
  <option value="1.2">S√©dentaire</option>
  <option value="1.375">L√©ger</option>
  <option value="1.55">Mod√©r√©</option>
  <option value="1.725">Tr√®s actif</option>
  <option value="1.9">Extr√™me</option>
</select>
<select id="morpho">
  <option value="auto">Auto</option>
  <option value="ecto">Ectomorphe</option>
  <option value="meso">M√©somorphe</option>
  <option value="endo">Endomorphe</option>
</select>
</div>

<button onclick="calculate()">CALCULER</button>
</div>

<!-- ================= R√âSULTATS ================= -->
<div id="resultsPage" style="display:none;">

<div class="section">
<h2>M√©tabolisme</h2>
<div class="table-box">
<table>
<tr><th>BMR (kcal/j)</th><th>TDEE (kcal/j)</th></tr>
<tr><td id="bmr"></td><td id="tdee"></td></tr>
</table>
</div>
<div class="explain">
BMR = √©nergie au repos ‚Ä¢ TDEE = d√©pense totale quotidienne.
</div>
</div>

<div class="section">
<h2>IMC & Seuils</h2>
<div class="table-box" id="morphoBox"></div>
<div class="explain">
&lt;18.5 = maigreur ‚Ä¢ 18.5‚Äì24.9 = normal ‚Ä¢ 25‚Äì29.9 = surpoids ‚Ä¢ ‚â•30 = ob√©sit√©.
</div>
</div>

<!-- MACROS -->
<div class="section">
<h2>Prot√©ines (kcal ‚Üí g/j)</h2>
<div class="table-box">
<table>
<tr><th>Objectif</th><th>kcal</th><th>g/j</th></tr>
<tr><td>Maintien</td><td id="pcal_maint"></td><td id="p_maint"></td></tr>
<tr><td>S√®che</td><td id="pcal_cut"></td><td id="p_cut"></td></tr>
<tr><td>Prise</td><td id="pcal_bulk"></td><td id="p_bulk"></td></tr>
</table>
</div>
<div class="explain">
Prot√©ines = muscle, r√©cup√©ration, sati√©t√©.
</div>
</div>

<div class="section">
<h2>Lipides (kcal ‚Üí g/j)</h2>
<div class="table-box">
<table>
<tr><th>Objectif</th><th>kcal</th><th>g/j</th></tr>
<tr><td>Maintien</td><td id="lcal_maint"></td><td id="l_maint"></td></tr>
<tr><td>S√®che</td><td id="lcal_cut"></td><td id="l_cut"></td></tr>
<tr><td>Prise</td><td id="lcal_bulk"></td><td id="l_bulk"></td></tr>
</table>
</div>
<div class="explain">
Lipides = hormones, cerveau, vitamines A/D/E/K.
</div>
</div>

<div class="section">
<h2>Glucides (kcal ‚Üí g/j)</h2>
<div class="table-box">
<table>
<tr><th>Objectif</th><th>kcal</th><th>g/j</th></tr>
<tr><td>Maintien</td><td id="gcal_maint"></td><td id="g_maint"></td></tr>
<tr><td>S√®che</td><td id="gcal_cut"></td><td id="g_cut"></td></tr>
<tr><td>Prise</td><td id="gcal_bulk"></td><td id="g_bulk"></td></tr>
</table>
</div>
<div class="explain">
Glucides = √©nergie, performance, r√©cup√©ration.
</div>
</div>

<div class="section">
<h2>üìä Indicateurs Quotidiens</h2>
<p><b>Hydratation :</b> <span id="water"></span></p>
<p><b>R√©partition repas :</b> 25% / 35% / 15% / 25%</p>
<p><b>Objectif recommand√© :</b> <span id="objective"></span></p>
</div>

<div class="section">
<h2>üß¨ Analyse M√©tabolique Avanc√©e</h2>
<p><b>Score m√©tabolique :</b> <span id="score"></span>/100</p>
<p><b>D√©pense par s√©ance :</b> <span id="burn"></span> kcal</p>
</div>

<div class="section">
<h2>üèÜ Recommandations d‚ÄôOptimisation</h2>
<p><b>Compl√©ments :</b> <span id="supps"></span></p>
<p><b>Plan :</b> <span id="plan"></span></p>
<p><b>Zig-zag :</b> <span id="zigzag"></span></p>
</div>

<div class="interpretation">
<h3>Interpr√©tation personnalis√©e</h3>
<p id="advice"></p>
</div>

<!-- üî• NOUVEAU BOUTON DI√àTE -->
<button onclick="generateDiet()">üçΩÔ∏è CR√âER MA DI√àTE PERSONNALIS√âE</button>
<button onclick="window.print()">T√âL√âCHARGER PDF</button>
</div>

<!-- ================= PAGE DI√àTE ================= -->
<div id="dietPage">
  <h2>üçΩÔ∏è Ta Di√®te Personnalis√©e</h2>

  <p><b>Profil :</b> <span id="dietProfile"></span></p>
  <p><b>Calories cible :</b> <span id="dietCalories"></span> kcal</p>
  <p><b>Macros :</b> P: <span id="dietP"></span>g | L: <span id="dietL"></span>g | G: <span id="dietG"></span>g</p>

  <div id="dietContent"></div>

  <button onclick="backToResults()">Retour aux r√©sultats</button>
</div>

<script>
// ==== VARIABLES GLOBALES (n√©cessaires pour la di√®te) ====
let bmr, tdee, imc;
let p_maint, l_maint, g_maint;

// ==================== CALCUL ====================
function calculate(){

const age = +document.getElementById("age").value;
const taille = +document.getElementById("taille").value;
const poids = +document.getElementById("poids").value;
const sexe = document.getElementById("sexe").value;
const act = +document.getElementById("activite").value;
const morpho = document.getElementById("morpho").value;

// BMR (Mifflin)
bmr = (sexe==="M")
? (10*poids)+(6.25*taille)-(5*age)+5
: (10*poids)+(6.25*taille)-(5*age)-161;

// TDEE
tdee = bmr * act;
if(morpho==="ecto") tdee*=1.05;
if(morpho==="endo") tdee*=0.95;

// IMC
const h = taille/100;
imc = poids/(h*h);
let imc_cat = imc<18.5?"Maigreur":imc<25?"Normal":imc<30?"Surpoids":"Ob√©sit√©";
const ideal = (22.5*h*h).toFixed(1);
const overweight = (25*h*h).toFixed(1);
const underweight = (18.5*h*h).toFixed(1);

// MACROS
p_maint = poids*2.2;
let p_cut = poids*2.6;
let p_bulk = poids*2.0;

l_maint = poids*0.8;
let l_cut = poids*0.7;
let l_bulk = poids*0.9;

// GLUCIDES
g_maint = (tdee - (p_maint*4) - (l_maint*9))/4;
let g_cut = (tdee - 350 - (p_cut*4) - (l_cut*9))/4;
let g_bulk = (tdee + 350 - (p_bulk*4) - (l_bulk*9))/4;

// Affichage
document.getElementById("bmr").innerText = Math.round(bmr);
document.getElementById("tdee").innerText = Math.round(tdee);

document.getElementById("morphoBox").innerHTML = `
<table>
<tr><th>IMC</th><th>Cat√©gorie</th><th>Poids id√©al</th><th>Surpoids d√®s</th><th>Maigreur sous</th></tr>
<tr>
<td>${imc.toFixed(1)}</td>
<td>${imc_cat}</td>
<td>${ideal} kg</td>
<td>${overweight} kg</td>
<td>${underweight} kg</td>
</tr>
</table>
`;

document.getElementById("pcal_maint").innerText = Math.round(p_maint*4)+" kcal";
document.getElementById("lcal_maint").innerText = Math.round(l_maint*9)+" kcal";
document.getElementById("gcal_maint").innerText = Math.round(g_maint*4)+" kcal";

document.getElementById("p_maint").innerText = Math.round(p_maint)+" g/j";
document.getElementById("l_maint").innerText = Math.round(l_maint)+" g/j";
document.getElementById("g_maint").innerText = Math.round(g_maint)+" g/j";

document.getElementById("water").innerText =
`${(poids*30).toFixed(0)}‚Äì${(poids*35).toFixed(0)} ml`;

document.getElementById("score").innerText =
Math.max(0,Math.min(100,100-Math.abs(22.5-imc)*2));

document.getElementById("supps").innerText =
"Whey 20‚Äì30g, Cr√©atine 3‚Äì5g, Om√©ga-3 1‚Äì2g, Magn√©sium 200‚Äì400mg, Vitamine D, Zinc, Ashwagandha, L-Carnitine, Caf√©ine, EAA si entra√Ænement √† jeun.";

document.getElementById("plan").innerText =
morpho==="ecto"?"3‚Äì4 force + 1 cardio l√©ger":
morpho==="endo"?"3 force + 2‚Äì3 cardio":
"4 force + 1 cardio";

document.getElementById("zigzag").innerText =
"Jours training +150 kcal ‚Ä¢ Jours repos ‚àí150 kcal";

// Interpr√©tation (inchang√©e)
const interpretations = [
"Maigreur + s√©dentaire : augmente calories progressivement.",
"Maigreur + mod√©r√© : priorise prot√©ines.",
"Maigreur + tr√®s actif : risque catabolique.",
"Normal + s√©dentaire : ajoute activit√©.",
"Normal + mod√©r√© : parfait √©quilibre.",
"Normal + tr√®s actif : augmente glucides.",
"Surpoids + s√©dentaire : marche quotidienne.",
"Surpoids + mod√©r√© : d√©ficit l√©ger.",
"Surpoids + tr√®s actif : prot√©ines √©lev√©es.",
"Ob√©sit√© + s√©dentaire : suivi recommand√©.",
"Ob√©sit√© + mod√©r√© : perte progressive.",
"Ob√©sit√© + tr√®s actif : prot√®ge articulations.",
"IMC bas + TDEE faible : m√©tabolisme lent.",
"IMC normal + TDEE √©lev√© : bon m√©tabolisme.",
"IMC √©lev√© + TDEE bas : augmente NEAT.",
"Ectomorphe maigre : surplus mod√©r√©.",
"M√©somorphe normal : recomposition.",
"Endomorphe surpoids : d√©ficit contr√¥l√©.",
"S√©dentaire normal : cardio l√©ger.",
"Mod√©r√© normal : √©quilibre.",
"Tr√®s actif normal : optimise r√©cup√©ration.",
"S√©dentaire maigre : musculation prioritaire.",
"Mod√©r√© surpoids : steps quotidiens.",
"Tr√®s actif surpoids : surveille fatigue.",
"S√©dentaire ob√®se : suivi m√©dical.",
"Mod√©r√© ob√®se : progression douce.",
"Tr√®s actif ob√®se : √©vite surcharge.",
"IMC normal + force : maintiens macros.",
"IMC normal + endurance : plus de glucides.",
"IMC normal + mixte : √©quilibre optimal."
];

document.getElementById("advice").innerText =
interpretations[Math.floor(Math.random()*interpretations.length)];

document.getElementById("formPage").style.display="none";
document.getElementById("resultsPage").style.display="block";
}

// ================= BASE DE DI√àTES (10/10/10/10) =================
const dietDatabase = {
  "ecto": {
    "maigreur": {
      meals: {
        breakfast: [
          {name:"Shake prise de masse", items:["Avoine 120g","Whey 40g","Beurre de cacahu√®te 30g","Banane 1","Lait 300ml"], prep:"Mixer 45 secondes."},
          {name:"Sportif complet", items:["Pain complet 2","≈íufs 3","Avocat 1/2","Orange 1","Huile d‚Äôolive 10g"], prep:"Cuire ≈ìufs, toaster pain."},
          {name:"Bol avoine-fruits", items:["Avoine 100g","Yaourt grec 250g","Miel 15g","Fruits rouges 200g","Amandes 25g"], prep:"M√©langer."},
          {name:"Pancakes prot√©in√©s", items:["Avoine 80g","Blancs d‚Äô≈ìufs 4","Whey 30g","Miel 10g","Myrtilles 150g"], prep:"Mixer et cuire."},
          {name:"Omelette √©nerg√©tique", items:["≈íufs 3","Pain complet 2","Fromage 40g","Jus d‚Äôorange 250ml"], prep:"Cuire omelette."},
          {name:"Granola maison", items:["Avoine 90g","Yaourt 200g","Noix 25g","Miel 15g"], prep:"M√©langer."},
          {name:"Smoothie bowl", items:["Banane 1","Fruits rouges 200g","Whey 30g","Lait 300ml"], prep:"Mixer √©pais."},
          {name:"Pain avoine + dinde", items:["Pain complet 2","Dinde 120g","Fromage 30g"], prep:"Assembler."},
          {name:"Cottage cheese bowl", items:["Cottage cheese 250g","Amandes 25g","Miel 10g"], prep:"M√©langer."},
          {name:"Cr√™pes prot√©in√©es", items:["Avoine 80g","Blancs d‚Äô≈ìufs 4","Miel 10g"], prep:"Cuire √† la po√™le."}
        ],
        lunch: [
          {name:"Riz & poulet", items:["Riz 250g","Poulet 220g","Huile 12g","Brocolis 300g"], prep:"Cuire riz, griller poulet."},
          {name:"P√¢tes dinde", items:["P√¢tes 200g","Dinde 200g","Huile 10g","Salade 150g"], prep:"Cuire et assembler."},
          {name:"Quinoa saumon", items:["Quinoa 180g","Saumon 180g","Huile 10g","L√©gumes 250g"], prep:"Cuire s√©par√©ment."},
          {name:"B≈ìuf patate douce", items:["B≈ìuf 220g","Patate douce 300g","Huile 10g","Haricots 250g"], prep:"Four + po√™le."},
          {name:"Poulet curry", items:["Riz 250g","Poulet 220g","Lait coco 100ml","√âpinards 200g"], prep:"Mijoter."},
          {name:"Riz basmati thon", items:["Riz 220g","Thon 180g","Huile 8g","Salade 150g"], prep:"Assembler."},
          {name:"P√¢tes saumon", items:["P√¢tes 180g","Saumon 180g","Cr√®me l√©g√®re 60ml"], prep:"M√©langer."},
          {name:"Poulet quinoa", items:["Quinoa 180g","Poulet 200g","L√©gumes 300g"], prep:"Griller et cuire."},
          {name:"B≈ìuf riz complet", items:["Riz complet 220g","B≈ìuf 200g","Huile 10g"], prep:"Cuire s√©par√©ment."},
          {name:"Dinde patate douce", items:["Dinde 200g","Patate douce 280g","Brocolis 250g"], prep:"Four + vapeur."}
        ],
        dinner: [
          {name:"Cabillaud quinoa", items:["Cabillaud 180g","Quinoa 160g","Brocolis 300g"], prep:"Four + vapeur."},
          {name:"Poulet l√©ger", items:["Poulet 200g","Riz 180g","Courgettes 250g"], prep:"Griller."},
          {name:"Saumon patate douce", items:["Saumon 200g","Patate douce 280g","Salade 150g"], prep:"Four."},
          {name:"B≈ìuf l√©gumes", items:["B≈ìuf 200g","Riz 180g","Haricots 250g"], prep:"Cuire."},
          {name:"Dinde quinoa", items:["Dinde 200g","Quinoa 160g","Brocolis 300g"], prep:"Assembler."},
          {name:"Thon salade", items:["Thon 180g","Salade 250g","Huile 5g"], prep:"M√©langer."},
          {name:"Poulet courgettes", items:["Poulet 200g","Courgettes 300g"], prep:"Po√™ler."},
          {name:"Saumon riz", items:["Saumon 180g","Riz 160g","Brocolis 250g"], prep:"Cuire."},
          {name:"Cabillaud l√©gumes", items:["Cabillaud 180g","L√©gumes 350g"], prep:"Four."},
          {name:"B≈ìuf quinoa", items:["B≈ìuf 200g","Quinoa 160g","√âpinards 250g"], prep:"Assembler."}
        ],
        snacks: [
          {name:"Fromage blanc", items:["Fromage blanc 200g","Miel 10g","Noix 20g"], prep:"M√©langer."},
          {name:"Shake whey", items:["Whey 30g","Eau 300ml"], prep:"Shaker."},
          {name:"Yaourt fruits", items:["Yaourt grec 250g","Fruits rouges 150g"], prep:"M√©langer."},
          {name:"Amandes banane", items:["Amandes 30g","Banane 1"], prep:"Manger."},
          {name:"Cottage cheese", items:["Cottage 200g","Sel/poivre"], prep:"Assaisonner."},
          {name:"Pain complet dinde", items:["Pain 2 tranches","Dinde 100g"], prep:"Assembler."},
          {name:"Skyr + miel", items:["Skyr 200g","Miel 10g"], prep:"M√©langer."},
          {name:"Noix mix", items:["Noix 25g","Amandes 15g"], prep:"Manger."},
          {name:"Smoothie whey", items:["Whey 30g","Lait 300ml","Banane 1"], prep:"Mixer."},
          {name:"Fromage blanc cannelle", items:["Fromage blanc 200g","Cannelle"], prep:"M√©langer."}
        ]
      }
    }
  }
  // (Pour la lisibilit√© du message, seule la branche ecto/maigreur est d√©taill√©e.
  // Tu peux dupliquer la m√™me structure pour meso/endo plus tard si tu veux.)
};

// ================= G√âN√âRATION DI√àTE =================
function generateDiet(){

let morpho = document.getElementById("morpho").value;

if(morpho === "auto"){
  if(imc < 18.5) morpho = "ecto";
  else if(imc < 25) morpho = "meso";
  else morpho = "endo";
}

let status;
if(imc < 18.5) status = "maigreur";
else if(imc < 25) status = "normal";
else status = "surpoids";

document.getElementById("dietProfile").innerText =
`${morpho.toUpperCase()} ‚Äî ${status}`;

document.getElementById("dietCalories").innerText = Math.round(tdee);
document.getElementById("dietP").innerText = Math.round(p_maint);
document.getElementById("dietL").innerText = Math.round(l_maint);
document.getElementById("dietG").innerText = Math.round(g_maint);

const profile = dietDatabase[morpho]?.[status];

if(!profile){
  document.getElementById("dietContent").innerHTML =
  "<p>Aucune di√®te sp√©cifique trouv√©e pour ce profil.</p>";
  return;
}

const pick = arr => arr[Math.floor(Math.random()*arr.length)];

const breakfast = pick(profile.meals.breakfast);
const snack1 = pick(profile.meals.snacks);
const lunch = pick(profile.meals.lunch);
const snack2 = pick(profile.meals.snacks);
const dinner = pick(profile.meals.dinner);

let html = "<h3>Plan nutritionnel personnalis√© (5 repas)</h3>";

[breakfast, snack1, lunch, snack2, dinner].forEach(meal => {
  html += `<h4>${meal.name}</h4><ul>`;
  meal.items.forEach(i => html += `<li>${i}</li>`);
  html += `</ul><p><b>Pr√©paration :</b> ${meal.prep}</p>`;
});

document.getElementById("dietContent").innerHTML = html;

document.getElementById("resultsPage").style.display="none";
document.getElementById("dietPage").style.display="block";
}

function backToResults(){
document.getElementById("dietPage").style.display="none";
document.getElementById("resultsPage").style.display="block";
}
</script>
</body>
</html>
