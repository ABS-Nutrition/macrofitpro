
<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MacroFit Pro – V3 Morphotype Ultra</title>
<style>
:root{
  --bg:#050709;
  --card:#0b0f14;
  --panel:#0f141b;
  --input:#111820;
  --border:#1e2833;
  --accent:#c9f02f;
  --accent-dim:#c9f02f22;
  --text:#e8eef4;
  --muted:#9aa6b2;
  --gold:#d4af37;
}
*{box-sizing:border-box;}
body{
  margin:0;
  padding:0;
  font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
  background:linear-gradient(180deg, #0b0f14 0%, #050709 100%);
  color:var(--text);
  min-height:100vh;
}
.app{
  max-width: 720px;
  margin:30px auto;
  background:var(--card);
  padding:24px;
  border-radius:20px;
  box-shadow:0 0 40px rgba(0,0,0,.9);
  border:1px solid var(--border);
  position:relative;
}
.app::before{
  content:"";
  display:block;
  height:5px;
  background:linear-gradient(90deg, var(--gold), var(--accent), #0b0f14);
  margin:-24px -24px 20px -24px;
  border-radius:20px 20px 0 0;
}
.header{text-align:center;margin-bottom:18px;}
h1{margin:0;color:var(--accent);font-size:26px;font-weight:800;}
.subtitle{font-size:13px;color:var(--muted);margin-top:6px;}
.section{margin-top:22px;padding-top:18px;border-top:1px solid var(--border);}
.section h2{color:var(--accent);font-size:18px;}
.field{ margin-top:12px; }
label{display:block;font-weight:700;margin-bottom:5px;font-size:14px;color:var(--muted);}
input, select, textarea{
  width:100%;
  padding:12px;
  border-radius:12px;
  border:1px solid var(--border);
  background:var(--input);
  color:white;
  font-size:16px;
}
button{
  width:100%;
  margin-top:18px;
  padding:13px;
  border-radius:16px;
  border:none;
  background:linear-gradient(90deg, var(--gold), var(--accent));
  color:#050709;
  font-weight:900;
  font-size:16px;
  text-transform:uppercase;
  letter-spacing:1px;
  cursor:pointer;
}
.table-box{
  margin-top:18px;
  background:var(--panel);
  padding:14px;
  border-radius:16px;
  border-left:5px solid var(--accent);
}
table{width:100%;border-collapse:collapse;margin-top:8px;}
th, td{border:1px solid var(--border);padding:8px;text-align:center;font-size:14px;}
th{background:#0b0f14;color:var(--accent);}
.result{ font-weight:800; }
.badge{
  display:inline-block;
  background:var(--accent-dim);
  color:var(--accent);
  padding:4px 8px;
  border-radius:999px;
  font-size:12px;
  margin-top:6px;
}
.note{font-size:12px;color:var(--muted);}
.footer{margin-top:18px;font-size:12px;text-align:center;color:var(--muted);}
.reco-box{margin-top:12px;padding:12px;border:1px solid var(--border);border-radius:12px;background:var(--panel);}
.reco-title{color:var(--accent);font-weight:800;margin-bottom:6px;}
</style>
</head>
<body>

<div class="app">
  <div class="header">
    <h1>⚜️ MacroFit Pro — V3 MORPHOTYPE ⚜️</h1>
    <div class="subtitle">Ultra calculs métaboliques, morphologiques et personnalisés</div>
  </div>

  <div class="section">
    <h2>1) Données de base</h2>
    <div class="field"><label>Âge</label><input type="number" id="age" placeholder="Ex : 25"></div>
    <div class="field"><label>Taille (cm)</label><input type="number" id="taille" placeholder="Ex : 175"></div>
    <div class="field"><label>Poids (kg)</label><input type="number" id="poids" placeholder="Ex : 70"></div>
    <div class="field"><label>Tour de taille (cm)</label><input type="number" id="tour" placeholder="Ex : 80"></div>
    <div class="field">
      <label>Sexe</label>
      <select id="sexe"><option value="M">Homme</option><option value="F">Femme</option></select>
    </div>
    <div class="field">
      <label>Niveau d'activité</label>
      <select id="activite">
        <option value="1.2">Sédentaire</option>
        <option value="1.375">Légèrement actif</option>
        <option value="1.55">Modérément actif</option>
        <option value="1.725">Très actif</option>
        <option value="1.9">Extrêmement actif</option>
      </select>
    </div>
    <div class="field"><label>Heures de sommeil / nuit</label><input type="number" id="sommeil" placeholder="Ex : 7"></div>
    <div class="field"><label>Niveau de stress (1-10)</label><input type="number" id="stress" placeholder="Ex : 6"></div>
  </div>

  <div class="section">
    <h2>2) Choisis ta morphologie (clé V3)</h2>
    <div class="field">
      <select id="morpho">
        <option value="auto">Auto (calculé)</option>
        <option value="ecto">Ectomorphe (mince, métabolisme rapide)</option>
        <option value="meso">Mésomorphe (athlétique)</option>
        <option value="endo">Endomorphe (prend facilement du gras)</option>
      </select>
    </div>
    <div class="note">Ce choix influencera : TDEE ajusté, ratios macros, protéines cibles et recommandations.</div>
  </div>

  <button id="btnCalc">CALCULER TOUT (V3)</button>

  <div class="section">
    <h2>3) Bloc Métabolisme (BMR & TDEE)</h2>
    <div class="table-box">
      <table>
        <tr><th>BMR Harris-Benedict</th><th>BMR Mifflin</th><th>TDEE brut</th><th>TDEE ajusté (morpho)</th></tr>
        <tr>
          <td id="bmr_hb" class="result">-</td>
          <td id="bmr_m" class="result">-</td>
          <td id="tdee_brut" class="result">-</td>
          <td id="tdee_adj" class="result">-</td>
        </tr>
      </table>
    </div>
  </div>

  <div class="section">
    <h2>4) Bloc Morphologie & Composition</h2>
    <div class="table-box">
      <table>
        <tr><th>IMC</th><th>Catégorie</th><th>% Masse grasse</th><th>Somatotype final</th></tr>
        <tr>
          <td id="imc" class="result">-</td>
          <td id="imc_cat" class="result">-</td>
          <td id="bf" class="result">-</td>
          <td id="somato" class="result">-</td>
        </tr>
      </table>
    </div>
  </div>

  <div class="section">
    <h2>5) Bloc Macros personnalisées (g/jour)</h2>
    <div class="table-box">
      <table>
        <tr><th>Objectif</th><th>Protéines</th><th>Lipides</th><th>Glucides</th></tr>
        <tr><td>Maintien</td><td id="p_maint" class="result">-</td><td id="l_maint" class="result">-</td><td id="g_maint" class="result">-</td></tr>
        <tr><td>Sèche</td><td id="p_cut" class="result">-</td><td id="l_cut" class="result">-</td><td id="g_cut" class="result">-</td></tr>
        <tr><td>Prise</td><td id="p_bulk" class="result">-</td><td id="l_bulk" class="result">-</td><td id="g_bulk" class="result">-</td></tr>
      </table>
    </div>
  </div>

  <div class="section">
    <h2>6) Bloc Fatigue & Récupération</h2>
    <div class="table-box">
      <table>
        <tr><th>Score fatigue (/10)</th><th>Ajustement calories</th><th>Priorités récupération</th></tr>
        <tr>
          <td id="fatigue" class="result">-</td>
          <td id="cal_adj" class="result">-</td>
          <td id="recup" class="result">-</td>
        </tr>
      </table>
    </div>
  </div>

  <div class="section">
    <h2>7) Recommandations personnalisées (V3)</h2>
    <div id="reco_global" class="reco-box"></div>
    <div id="reco_prot" class="reco-box"></div>
    <div id="reco_supp" class="reco-box"></div>
  </div>

  <div class="section">
    <h2>Notes méthodologiques</h2>
    <p class="note">
    • BMR : Harris-Benedict & Mifflin-St Jeor.<br>
    • TDEE ajusté selon morphotype choisi.<br>
    • % masse grasse : estimation YMCA via tour de taille.<br>
    • Somatotype : combiné IMC + choix utilisateur.<br>
    • Macros : adaptées au morphotype + objectif.<br>
    • Fatigue : basée sur sommeil + stress.<br>
    • Outil indicatif, non médical.
    </p>
  </div>

  <div class="footer">MacroFit Pro — V3 Morphotype Ultra</div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(){

document.getElementById("btnCalc").addEventListener("click", function(){

  const age = parseFloat(document.getElementById("age").value);
  const taille = parseFloat(document.getElementById("taille").value);
  const poids = parseFloat(document.getElementById("poids").value);
  const tour = parseFloat(document.getElementById("tour").value);
  const sexe = document.getElementById("sexe").value;
  const act = parseFloat(document.getElementById("activite").value);
  const sommeil = parseFloat(document.getElementById("sommeil").value) || 7;
  const stress = parseFloat(document.getElementById("stress").value) || 5;
  const morpho = document.getElementById("morpho").value;

  // ===== BMR =====
  const bmr_hb = (sexe === "M")
    ? 66 + (13.7 * poids) + (5 * taille) - (6.8 * age)
    : 655 + (9.6 * poids) + (1.8 * taille) - (4.7 * age);

  const bmr_m = (sexe === "M")
    ? (10 * poids) + (6.25 * taille) - (5 * age) + 5
    : (10 * poids) + (6.25 * taille) - (5 * age) - 161;

  const tdee_brut = bmr_m * act;

  // ===== IMC =====
  const imc = poids / Math.pow(taille/100, 2);
  let imc_cat = "";
  if (imc < 18.5) imc_cat = "Maigreur";
  else if (imc < 25) imc_cat = "Normal";
  else if (imc < 30) imc_cat = "Surpoids";
  else imc_cat = "Obésité";

  // ===== % Masse grasse (YMCA) =====
  let bf = "Non calculé";
  if (!isNaN(tour)) {
    if (sexe === "M") {
      let lean = (1.082 * poids) + 94.42 - (4.15 * tour);
      bf = (((poids - lean) / poids) * 100).toFixed(1) + "%";
    } else {
      let lean = (0.732 * poids) + 8.987 + (0.157 * tour);
      bf = (((poids - lean) / poids) * 100).toFixed(1) + "%";
    }
  }

  // ===== Somatotype (auto si choisi) =====
  let somato = "";
  if (morpho === "auto") {
    if (imc < 20) somato = "Ectomorphe";
    else if (imc >= 20 && imc <= 25) somato = "Mésomorphe";
    else somato = "Endomorphe";
  } else if (morpho === "ecto") somato = "Ectomorphe";
  else if (morpho === "meso") somato = "Mésomorphe";
  else somato = "Endomorphe";

  // ===== TDEE ajusté selon morphotype =====
  let tdee_adj = tdee_brut;
  if (somato === "Ectomorphe") tdee_adj *= 1.05;      // métabolisme rapide
  else if (somato === "Endomorphe") tdee_adj *= 0.95; // tendance stockage
  // mésomorphe = neutre

  // ===== Macros selon morphotype =====
  function macros(cal, p, l, g){
    return {
      p: Math.round((cal*p)/4),
      l: Math.round((cal*l)/9),
      g: Math.round((cal*g)/4)
    };
  }

  let ratios = {};
  if (somato === "Ectomorphe") {
    ratios = {
      maint: [0.28, 0.25, 0.47],
      cut:   [0.32, 0.23, 0.45],
      bulk:  [0.27, 0.22, 0.51]
    };
  } else if (somato === "Mésomorphe") {
    ratios = {
      maint: [0.30, 0.30, 0.40],
      cut:   [0.35, 0.25, 0.40],
      bulk:  [0.30, 0.25, 0.45]
    };
  } else { // Endomorphe
    ratios = {
      maint: [0.32, 0.28, 0.40],
      cut:   [0.38, 0.22, 0.40],
      bulk:  [0.28, 0.22, 0.50]
    };
  }

  const mMaint = macros(tdee_adj, ...ratios.maint);
  const mCut   = macros(tdee_adj - 350, ...ratios.cut);
  const mBulk  = macros(tdee_adj + 350, ...ratios.bulk);

  // ===== Fatigue =====
  const fatigue_score = Math.max(0, Math.min(10, (10 - sommeil) + (stress/2)));
  let cal_adj_txt = "";
  let recup_txt = "";

  if (fatigue_score >= 7) {
    cal_adj_txt = "-150 kcal conseillés";
    recup_txt = "Sommeil prioritaire + Magnésium + Oméga-3";
  } else if (fatigue_score >= 4) {
    cal_adj_txt = "Maintien calorique";
    recup_txt = "Hydratation + mobilité + respiration";
  } else {
    cal_adj_txt = "+150 kcal possibles";
    recup_txt = "Récupération optimale";
  }

  // ===== Recommandations personnalisées =====
  let reco_global = "";
  if (somato === "Ectomorphe") {
    reco_global = "Tu as un métabolisme rapide : privilégie surplus calorique léger, repas fréquents et volume d’entraînement modéré.";
  } else if (somato === "Mésomorphe") {
    reco_global = "Morphologie favorable : équilibre entre force et volume, macros équilibrées, progression régulière.";
  } else {
    reco_global = "Tendance au stockage : privilégie déficit modéré, entraînement en force + cardio, et protéines plus élevées.";
  }

  const prot_kg = (somato === "Endomorphe") ? 2.2 : (somato === "Ectomorphe") ? 1.8 : 2.0;
  const reco_prot = "Objectif protéines recommandé : ~ " + (prot_kg * poids).toFixed(0) + " g/jour (" + prot_kg + " g/kg).";

  let reco_supp = "";
  if (somato === "Ectomorphe") {
    reco_supp = "Suppléments utiles : Whey (20–40 g post-training), Créatine 3–5 g/j, Oméga-3 1–2 g/j.";
  } else if (somato === "Mésomorphe") {
    reco_supp = "Suppléments utiles : Whey (20–40 g), Créatine 3–5 g/j, Vitamine D si peu d’exposition.";
  } else {
    reco_supp = "Suppléments utiles : Whey (25–45 g), Oméga-3 2–3 g/j, Magnésium le soir ; brûleurs = secondaires.";
  }

  // ===== AFFICHAGE =====
  document.getElementById("bmr_hb").innerText = Math.round(bmr_hb);
  document.getElementById("bmr_m").innerText = Math.round(bmr_m);
  document.getElementById("tdee_brut").innerText = Math.round(tdee_brut);
  document.getElementById("tdee_adj").innerText = Math.round(tdee_adj);

  document.getElementById("imc").innerText = imc.toFixed(1);
  document.getElementById("imc_cat").innerText = imc_cat;
  document.getElementById("bf").innerText = bf;
  document.getElementById("somato").innerText = somato;

  document.getElementById("p_maint").innerText = mMaint.p;
  document.getElementById("l_maint").innerText = mMaint.l;
  document.getElementById("g_maint").innerText = mMaint.g;

  document.getElementById("p_cut").innerText = mCut.p;
  document.getElementById("l_cut").innerText = mCut.l;
  document.getElementById("g_cut").innerText = mCut.g;

  document.getElementById("p_bulk").innerText = mBulk.p;
  document.getElementById("l_bulk").innerText = mBulk.l;
  document.getElementById("g_bulk").innerText = mBulk.g;

  document.getElementById("fatigue").innerText = fatigue_score.toFixed(1) + "/10";
  document.getElementById("cal_adj").innerText = cal_adj_txt;
  document.getElementById("recup").innerText = recup_txt;

  document.getElementById("reco_global").innerHTML = "<div class='reco-title'>Orientation générale</div>" + reco_global;
  document.getElementById("reco_prot").innerHTML = "<div class='reco-title'>Protéines cibles</div>" + reco_prot;
  document.getElementById("reco_supp").innerHTML = "<div class='reco-title'>Compléments</div>" + reco_supp;
});
});
</script>
</body>
</html>
